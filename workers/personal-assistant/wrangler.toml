name = "personal-assistant"
main = "src/index.ts"
compatibility_date = "2026-02-19"
compatibility_flags = ["nodejs_compat"]

# Environment variables (override via wrangler secret for production)
[vars]
GATEWAY_URL = "http://152.53.55.207:18789"
GATEWAY_TOKEN = "moltbot-secure-token-2026"
ENVIRONMENT = "development"
RATE_LIMIT_PER_MINUTE = "30"

# D1 Database binding (session storage)
[[d1_databases]]
binding = "DB"
database_name = "personal-assistant"
database_id = "9cf10366-f49c-4532-89c2-8859e1ed9673"

# KV bindings (cache + sessions)
[[kv_namespaces]]
binding = "KV_CACHE"
id = "35795036d1084b8284a8c57f4b170618"

[[kv_namespaces]]
binding = "KV_SESSIONS"
id = "a4119f70fe7d42ecb8b8b49569c11e32"

[env.production]
name = "personal-assistant"
vars = { ENVIRONMENT = "production" }
routes = [{ pattern = "assistant.overseerclaw.uk/*", zone_name = "overseerclaw.uk" }]

[env.development]
name = "personal-assistant-dev"
vars = { ENVIRONMENT = "development" }

[limits]
cpu_ms = 50000
