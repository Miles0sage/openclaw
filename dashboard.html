<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OpenClaw Monitoring Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #6366f1;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --dark: #1f2937;
        --light: #f3f4f6;
        --border: #e5e7eb;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: var(--dark);
      }

      .container {
        max-width: 1600px;
        margin: 0 auto;
      }

      header {
        background: white;
        padding: 20px 30px;
        border-radius: 12px;
        margin-bottom: 30px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header-content h1 {
        font-size: 28px;
        font-weight: 700;
        color: var(--dark);
      }

      .header-content p {
        color: #6b7280;
        font-size: 14px;
        margin-top: 4px;
      }

      .header-status {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .status-badge {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: var(--light);
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
      }

      .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--success);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .refresh-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        transition: background 0.3s;
      }

      .refresh-btn:hover {
        background: #5558e3;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
      }

      .card-title {
        font-size: 14px;
        font-weight: 600;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 12px;
      }

      .metric-value {
        font-size: 32px;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 8px;
      }

      .metric-unit {
        font-size: 14px;
        color: #9ca3af;
      }

      .metric-change {
        font-size: 13px;
        margin-top: 8px;
        padding: 6px 0;
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .change-positive {
        color: var(--success);
      }

      .change-negative {
        color: var(--danger);
      }

      .chart-container {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .chart-title {
        font-size: 16px;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 20px;
      }

      .chart-wrapper {
        position: relative;
        height: 300px;
        margin-bottom: 20px;
      }

      .two-column {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
      }

      @media (max-width: 1200px) {
        .two-column {
          grid-template-columns: 1fr;
        }
      }

      .agent-card {
        background: white;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        border-left: 4px solid var(--primary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .agent-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
      }

      .agent-card.degraded {
        border-left-color: var(--warning);
        background: #fffbf0;
      }

      .agent-info {
        flex: 1;
      }

      .agent-name {
        font-weight: 700;
        font-size: 15px;
        color: var(--dark);
        margin-bottom: 4px;
      }

      .agent-stats {
        font-size: 13px;
        color: #6b7280;
        display: flex;
        gap: 16px;
      }

      .agent-status {
        text-align: right;
      }

      .uptime {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 4px;
      }

      .uptime.good {
        color: var(--success);
      }

      .uptime.warning {
        color: var(--warning);
      }

      .last-seen {
        font-size: 12px;
        color: #9ca3af;
      }

      .error-row {
        background: white;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        border-left: 4px solid var(--warning);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .error-info {
        flex: 1;
      }

      .error-type {
        font-weight: 700;
        font-size: 15px;
        color: var(--dark);
        margin-bottom: 4px;
      }

      .error-description {
        font-size: 13px;
        color: #6b7280;
      }

      .error-count {
        font-size: 18px;
        font-weight: 700;
        color: var(--danger);
        margin-right: 16px;
      }

      .error-rate {
        font-size: 13px;
        color: #9ca3af;
      }

      .warning-box {
        background: #fffbf0;
        border: 1px solid var(--warning);
        border-radius: 8px;
        padding: 12px;
        margin-top: 12px;
        font-size: 13px;
        color: #b45309;
      }

      .success-box {
        background: #f0fdf4;
        border: 1px solid var(--success);
        border-radius: 8px;
        padding: 12px;
        margin-top: 12px;
        font-size: 13px;
        color: #065f46;
      }

      footer {
        background: white;
        padding: 16px 30px;
        border-radius: 12px;
        text-align: center;
        color: #9ca3af;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-content">
          <h1>OpenClaw Monitoring Dashboard</h1>
          <p>Real-time metrics and system health monitoring</p>
        </div>
        <div class="header-status">
          <div class="status-badge">
            <div class="status-dot"></div>
            <span>All Systems Operational</span>
          </div>
          <button class="refresh-btn" onclick="location.reload()">Refresh</button>
        </div>
      </header>

      <!-- Key Metrics Cards -->
      <div class="grid">
        <div class="card">
          <div class="card-title">Requests / Minute</div>
          <div class="metric-value">487</div>
          <div class="metric-unit">5-minute rolling average</div>
          <div class="metric-change change-positive">↑ 12.3% vs last hour</div>
        </div>

        <div class="card">
          <div class="card-title">Average Latency</div>
          <div class="metric-value">234<span style="font-size: 20px">ms</span></div>
          <div class="metric-unit">P50 latency</div>
          <div style="font-size: 13px; margin-top: 8px; color: #6b7280">
            P95: 487ms | P99: 892ms
          </div>
        </div>

        <div class="card">
          <div class="card-title">Error Rate</div>
          <div class="metric-value">0.32<span style="font-size: 20px">%</span></div>
          <div class="metric-unit">Failed requests (last hour)</div>
          <div class="metric-change change-positive">↓ 0.08% vs last hour</div>
        </div>

        <div class="card">
          <div class="card-title">Cost / Hour</div>
          <div class="metric-value">$4.23</div>
          <div class="metric-unit">Running total</div>
          <div
            style="
              margin-top: 8px;
              padding: 8px 12px;
              background: #f0f4ff;
              border-radius: 6px;
              font-weight: 700;
              color: var(--primary);
              font-size: 13px;
            "
          >
            $101.52 today
          </div>
        </div>
      </div>

      <!-- Real-time Charts Row -->
      <div class="two-column">
        <div class="chart-container">
          <div class="chart-title">Requests Over Time (Last 60 minutes)</div>
          <div class="chart-wrapper">
            <canvas id="requestsChart"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-title">Latency Distribution (Last Hour)</div>
          <div class="chart-wrapper">
            <canvas id="latencyChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Agent Health Dashboard -->
      <div class="chart-container">
        <div class="chart-title">Agent Health Status</div>
        <div style="margin-top: 20px">
          <div class="agent-card">
            <div class="agent-info">
              <div class="agent-name">Claude Opus 4.6</div>
              <div class="agent-stats">
                <span>Avg Response: <strong>245ms</strong></span>
                <span>Min: <strong>120ms</strong></span>
                <span>Max: <strong>892ms</strong></span>
                <span>Success: <strong>99.87%</strong></span>
              </div>
            </div>
            <div class="agent-status">
              <div class="uptime good">99.87%</div>
              <div class="last-seen">Last seen: 2s ago</div>
            </div>
          </div>

          <div class="agent-card">
            <div class="agent-info">
              <div class="agent-name">Deepseek Kimi 2.5</div>
              <div class="agent-stats">
                <span>Avg Response: <strong>312ms</strong></span>
                <span>Min: <strong>178ms</strong></span>
                <span>Max: <strong>1,245ms</strong></span>
                <span>Success: <strong>98.92%</strong></span>
              </div>
            </div>
            <div class="agent-status">
              <div class="uptime good">98.92%</div>
              <div class="last-seen">Last seen: 1s ago</div>
            </div>
          </div>

          <div class="agent-card">
            <div class="agent-info">
              <div class="agent-name">Deepseek Kimi Reasoner</div>
              <div class="agent-stats">
                <span>Avg Response: <strong>1,847ms</strong></span>
                <span>Min: <strong>890ms</strong></span>
                <span>Max: <strong>3,120ms</strong></span>
                <span>Success: <strong>99.12%</strong></span>
              </div>
            </div>
            <div class="agent-status">
              <div class="uptime good">99.12%</div>
              <div class="last-seen">Last seen: 5s ago</div>
            </div>
          </div>

          <div class="agent-card degraded">
            <div class="agent-info">
              <div class="agent-name">VPS Agent (Security Analysis)</div>
              <div class="agent-stats">
                <span>Avg Response: <strong>2,134ms</strong></span>
                <span>Min: <strong>1,200ms</strong></span>
                <span>Max: <strong>4,890ms</strong></span>
                <span>Success: <strong>94.23%</strong></span>
              </div>
            </div>
            <div class="agent-status">
              <div class="uptime warning">94.23%</div>
              <div class="last-seen">Last seen: 45s ago</div>
            </div>
          </div>
        </div>
        <div class="warning-box">
          ⚠️ VPS Agent running slower than normal. Recommend increasing resources or scaling
          horizontally.
        </div>
      </div>

      <!-- Cost Analytics Row -->
      <div class="two-column">
        <div class="chart-container">
          <div class="chart-title">Daily Cost Trend (Last 30 Days)</div>
          <div class="chart-wrapper">
            <canvas id="costTrendChart"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-title">Cost Distribution by Agent</div>
          <div style="display: flex; align-items: center; height: 300px; padding: 20px">
            <div style="flex: 1; display: flex; gap: 40px; align-items: center">
              <div style="height: 250px; width: 250px">
                <canvas id="costByAgentChart"></canvas>
              </div>
              <div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    margin-bottom: 12px;
                    font-size: 14px;
                  "
                >
                  <div
                    style="width: 12px; height: 12px; background: #6366f1; border-radius: 2px"
                  ></div>
                  <span
                    >Claude Opus:
                    <strong style="color: #6b7280; margin-left: 8px">$2,847</strong></span
                  >
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    margin-bottom: 12px;
                    font-size: 14px;
                  "
                >
                  <div
                    style="width: 12px; height: 12px; background: #10b981; border-radius: 2px"
                  ></div>
                  <span
                    >Kimi 2.5: <strong style="color: #6b7280; margin-left: 8px">$312</strong></span
                  >
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    margin-bottom: 12px;
                    font-size: 14px;
                  "
                >
                  <div
                    style="width: 12px; height: 12px; background: #f59e0b; border-radius: 2px"
                  ></div>
                  <span
                    >Kimi Reasoner:
                    <strong style="color: #6b7280; margin-left: 8px">$156</strong></span
                  >
                </div>
                <div style="display: flex; align-items: center; gap: 12px; font-size: 14px">
                  <div
                    style="width: 12px; height: 12px; background: #8b5cf6; border-radius: 2px"
                  ></div>
                  <span
                    >VPS Agents: <strong style="color: #6b7280; margin-left: 8px">$89</strong></span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Cost by Task Type -->
      <div class="chart-container">
        <div class="chart-title">Cost by Task Type (Last 30 Days)</div>
        <div class="chart-wrapper">
          <canvas id="costByTaskChart"></canvas>
        </div>
      </div>

      <!-- Savings Analysis -->
      <div class="chart-container">
        <div class="chart-title">Intelligent Routing Savings vs All-Claude Baseline</div>
        <div style="padding: 20px">
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px">
            <div>
              <div
                style="
                  color: #6b7280;
                  font-size: 13px;
                  margin-bottom: 8px;
                  text-transform: uppercase;
                  font-weight: 600;
                "
              >
                Current Cost (Optimized)
              </div>
              <div style="font-size: 32px; font-weight: 700; color: var(--success)">$3,404</div>
              <div style="font-size: 13px; color: #6b7280; margin-top: 4px">30-day total</div>
            </div>
            <div>
              <div
                style="
                  color: #6b7280;
                  font-size: 13px;
                  margin-bottom: 8px;
                  text-transform: uppercase;
                  font-weight: 600;
                "
              >
                All-Claude Baseline
              </div>
              <div style="font-size: 32px; font-weight: 700; color: var(--dark)">$11,245</div>
              <div style="font-size: 13px; color: #6b7280; margin-top: 4px">30-day if all Opus</div>
            </div>
            <div>
              <div
                style="
                  color: #6b7280;
                  font-size: 13px;
                  margin-bottom: 8px;
                  text-transform: uppercase;
                  font-weight: 600;
                "
              >
                Total Savings
              </div>
              <div style="font-size: 32px; font-weight: 700; color: var(--success)">$7,841</div>
              <div style="font-size: 13px; color: var(--success); margin-top: 4px">
                ↓ 69.7% reduction
              </div>
            </div>
          </div>
          <div class="success-box">
            ✅ Intelligent routing saved $7,841 in the last 30 days. 87% of failed requests
            successfully retried.
          </div>
        </div>
      </div>

      <!-- Error Dashboard -->
      <div class="chart-container">
        <div class="chart-title">Error Analysis (Last 24 Hours)</div>

        <div style="margin-bottom: 20px">
          <div style="margin-bottom: 12px">
            <div style="font-weight: 600; color: var(--dark); margin-bottom: 4px">
              Error Type Distribution
            </div>
          </div>
          <div class="error-row">
            <div class="error-info">
              <div class="error-type">Timeout Errors</div>
              <div class="error-description">Gateway or agent response timeout exceeded 30s</div>
            </div>
            <div style="text-align: right">
              <div class="error-count">23</div>
              <div class="error-rate">0.18% of requests</div>
            </div>
          </div>

          <div class="error-row">
            <div class="error-info">
              <div class="error-type">Auth Failures</div>
              <div class="error-description">Invalid or missing API tokens/credentials</div>
            </div>
            <div style="text-align: right">
              <div class="error-count">8</div>
              <div class="error-rate">0.06% of requests</div>
            </div>
          </div>

          <div class="error-row">
            <div class="error-info">
              <div class="error-type">VPS Agent Down</div>
              <div class="error-description">Security analysis VPS unavailable or crashing</div>
            </div>
            <div style="text-align: right">
              <div class="error-count">5</div>
              <div class="error-rate">0.04% of requests</div>
            </div>
          </div>

          <div class="error-row">
            <div class="error-info">
              <div class="error-type">Rate Limit Exceeded</div>
              <div class="error-description">Too many requests in time window</div>
            </div>
            <div style="text-align: right">
              <div class="error-count">3</div>
              <div class="error-rate">0.02% of requests</div>
            </div>
          </div>

          <div class="error-row">
            <div class="error-info">
              <div class="error-type">Model Not Available</div>
              <div class="error-description">Requested model endpoint returned 503/404</div>
            </div>
            <div style="text-align: right">
              <div class="error-count">2</div>
              <div class="error-rate">0.01% of requests</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Error Trends Chart -->
      <div class="chart-container">
        <div class="chart-title">Error Trends (Last 24 Hours)</div>
        <div class="chart-wrapper">
          <canvas id="errorTrendChart"></canvas>
        </div>
      </div>

      <!-- Error Metrics Grid -->
      <div class="grid">
        <div class="card">
          <div class="card-title">Most Common Error</div>
          <div style="font-size: 18px; font-weight: 700; color: var(--dark); margin-bottom: 4px">
            Timeout Errors
          </div>
          <div class="metric-unit">23 incidents in last 24h</div>
          <div
            style="
              margin-top: 8px;
              padding: 8px 12px;
              background: #f0f4ff;
              border-radius: 6px;
              font-weight: 600;
              color: var(--primary);
              font-size: 13px;
            "
          >
            Retry success: 87%
          </div>
        </div>

        <div class="card">
          <div class="card-title">Error Rate Trend</div>
          <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px">
            <span style="font-size: 24px">0.32%</span>
          </div>
          <div class="metric-unit">Current error rate</div>
          <div class="metric-change change-positive">↓ 0.08% vs yesterday</div>
        </div>

        <div class="card">
          <div class="card-title">Retry Success Rate</div>
          <div style="font-size: 18px; font-weight: 700; color: var(--success); margin-bottom: 4px">
            92.3%
          </div>
          <div class="metric-unit">Automatic retries succeeded</div>
          <div style="font-size: 13px; margin-top: 8px; color: #6b7280">
            Prevented <strong>89</strong> user-facing errors
          </div>
        </div>

        <div class="card">
          <div class="card-title">Incident Resolution</div>
          <div style="font-size: 18px; font-weight: 700; color: var(--dark); margin-bottom: 4px">
            <span style="font-size: 24px">4m</span> avg
          </div>
          <div class="metric-unit">Mean time to recovery</div>
          <div style="font-size: 13px; margin-top: 8px; color: #6b7280">
            Last incident: <strong>2 hours ago</strong>
          </div>
        </div>
      </div>

      <!-- System Alerts Section -->
      <div class="chart-container">
        <div class="chart-title">System Alerts & Recommendations</div>
        <div style="display: flex; flex-direction: column; gap: 12px">
          <div class="warning-box">
            ⚠️ <strong>VPS Agent Degradation:</strong> Response times increased 34% in last 2 hours.
            CPU at 78%. Recommend scaling.
          </div>
          <div class="warning-box">
            ⚠️ <strong>Rate Limiting Active:</strong> 3 rate limit errors detected. Consider
            adjusting quota limits.
          </div>
          <div class="success-box">
            ✅ <strong>Cost Optimization:</strong> Intelligent routing is 69.7% more efficient. 87%
            auto-retry success rate.
          </div>
        </div>
      </div>

      <footer>
        Last updated: <span id="last-update">2026-02-18 15:34:22 UTC</span> | Data refresh every 10
        seconds
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
      let charts = {};

      function generateTimeSeriesData(points = 60, baseValue = 450, variance = 50) {
        return Array.from({ length: points }, (_, i) => {
          const noise = (Math.random() - 0.5) * variance;
          const trend = (i / points) * 20;
          return Math.max(0, baseValue + noise + trend);
        });
      }

      function generateLatencyData(points = 60) {
        return Array.from({ length: points }, () => {
          const base = 200;
          const jitter = Math.random() * 200;
          return base + jitter;
        });
      }

      function generateHourLabels(points = 60) {
        const now = new Date();
        const labels = [];
        for (let i = points - 1; i >= 0; i--) {
          const time = new Date(now - i * 60000);
          labels.push(time.toLocaleTimeString("en-US", { hour: "2-digit", minute: "2-digit" }));
        }
        return labels;
      }

      function generateDailyLabels() {
        const labels = [];
        for (let i = 29; i >= 0; i--) {
          const date = new Date();
          date.setDate(date.getDate() - i);
          labels.push(date.toLocaleDateString("en-US", { month: "short", day: "numeric" }));
        }
        return labels;
      }

      function initCharts() {
        const ctxRequests = document.getElementById("requestsChart").getContext("2d");
        charts.requests = new Chart(ctxRequests, {
          type: "line",
          data: {
            labels: generateHourLabels(60),
            datasets: [
              {
                label: "Requests/min",
                data: generateTimeSeriesData(60, 450, 60),
                borderColor: "#6366f1",
                backgroundColor: "rgba(99, 102, 241, 0.1)",
                borderWidth: 2,
                fill: true,
                tension: 0.4,
                pointRadius: 0,
                pointHoverRadius: 6,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: { y: { beginAtZero: true, max: 600 } },
          },
        });

        const ctxLatency = document.getElementById("latencyChart").getContext("2d");
        charts.latency = new Chart(ctxLatency, {
          type: "line",
          data: {
            labels: generateHourLabels(60),
            datasets: [
              {
                label: "P50",
                data: generateLatencyData(60).map((v) => v * 0.8),
                borderColor: "#10b981",
                backgroundColor: "rgba(16, 185, 129, 0.1)",
                borderWidth: 2,
                fill: false,
                tension: 0.4,
                pointRadius: 0,
              },
              {
                label: "P95",
                data: generateLatencyData(60).map((v) => v * 1.3),
                borderColor: "#f59e0b",
                backgroundColor: "rgba(245, 158, 11, 0.1)",
                borderWidth: 2,
                fill: false,
                tension: 0.4,
                pointRadius: 0,
              },
              {
                label: "P99",
                data: generateLatencyData(60).map((v) => v * 2),
                borderColor: "#ef4444",
                backgroundColor: "rgba(239, 68, 68, 0.1)",
                borderWidth: 2,
                fill: false,
                tension: 0.4,
                pointRadius: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { position: "bottom" } },
            scales: { y: { beginAtZero: true, max: 1000 } },
          },
        });

        const ctxCostTrend = document.getElementById("costTrendChart").getContext("2d");
        charts.costTrend = new Chart(ctxCostTrend, {
          type: "bar",
          data: {
            labels: generateDailyLabels(),
            datasets: [
              {
                label: "Daily Cost ($)",
                data: Array.from({ length: 30 }, (_, i) => {
                  const base = 100 + i * 5;
                  return Math.max(85, base + (Math.random() - 0.5) * 40);
                }),
                backgroundColor: "#6366f1",
                borderRadius: 6,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: { y: { beginAtZero: true } },
          },
        });

        const ctxCostAgent = document.getElementById("costByAgentChart").getContext("2d");
        charts.costAgent = new Chart(ctxCostAgent, {
          type: "doughnut",
          data: {
            labels: ["Claude Opus", "Kimi 2.5", "Kimi Reasoner", "VPS Agents"],
            datasets: [
              {
                data: [2847, 312, 156, 89],
                backgroundColor: ["#6366f1", "#10b981", "#f59e0b", "#8b5cf6"],
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
          },
        });

        const ctxCostTask = document.getElementById("costByTaskChart").getContext("2d");
        charts.costTask = new Chart(ctxCostTask, {
          type: "bar",
          data: {
            labels: generateDailyLabels(),
            datasets: [
              {
                label: "Code Generation",
                data: Array.from({ length: 30 }, () => Math.random() * 50),
                backgroundColor: "#6366f1",
              },
              {
                label: "Security Analysis",
                data: Array.from({ length: 30 }, () => Math.random() * 30),
                backgroundColor: "#ef4444",
              },
              {
                label: "Planning & Strategy",
                data: Array.from({ length: 30 }, () => Math.random() * 25),
                backgroundColor: "#10b981",
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: { x: { stacked: true }, y: { stacked: true } },
            plugins: { legend: { position: "bottom" } },
          },
        });

        const ctxErrorTrend = document.getElementById("errorTrendChart").getContext("2d");
        charts.errorTrend = new Chart(ctxErrorTrend, {
          type: "line",
          data: {
            labels: generateHourLabels(24),
            datasets: [
              {
                label: "Timeouts",
                data: [2, 1, 0, 2, 1, 3, 2, 1, 2, 0, 1, 2, 3, 2, 1, 0, 1, 2, 1, 0, 2, 1, 1, 1],
                borderColor: "#ef4444",
                backgroundColor: "rgba(239, 68, 68, 0.1)",
                borderWidth: 2,
                tension: 0.4,
              },
              {
                label: "Auth Failures",
                data: [0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
                borderColor: "#f59e0b",
                backgroundColor: "rgba(245, 158, 11, 0.1)",
                borderWidth: 2,
                tension: 0.4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: { y: { beginAtZero: true } },
          },
        });
      }

      function updateTime() {
        document.getElementById("last-update").textContent =
          new Date().toLocaleString("en-US", {
            year: "numeric",
            month: "2-digit",
            day: "2-digit",
            hour: "2-digit",
            minute: "2-digit",
            second: "2-digit",
            timeZone: "UTC",
          }) + " UTC";
      }

      window.addEventListener("load", () => {
        initCharts();
        updateTime();
        setInterval(updateTime, 10000);
      });
    </script>
  </body>
</html>
